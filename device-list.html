<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta device="viewport" content="width=device-width, initial-scale=1">
  <!-- PAGE settings -->
  <link rel="icon" href="https://templates.pingendo.com/assets/Pingendo_favicon.ico">
  <title>LoongwrtS</title>
  <meta device="description" content="Free Bootstrap 4 Pingendo Aquamarine template for restaurant and food">
  <meta device="keywords" content="Pingendo restaurant food aquamarine free template bootstrap 4">
  <!-- CSS dependencies -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <!-- Script: Make my navbar transparent when the document is scrolled to top -->
  <script src="js/navbar-ontop.js"></script>
  <!-- Script: Animated entrance -->
  <script src="js/animate-in.js"></script>
  <link rel="stylesheet" href="aquamarine.css">
  <script language="javascript">
    // 这个脚本是 ie6和ie7 通用的脚本
    function custom_close() {
      if (confirm("您确定要关闭本页吗？")) {
        window.opener = null
        window.open('about:blank', '_top').close()
      } else {}
    }
  </script>

<script>
  //按钮点击事件
  function ViewData() {
      let tableHtml = $(document).find('table.border_distance tbody tr.device1');
      let data = getTableData(tableHtml);

//      alert('表格的内容为：' + JSON.stringify(data) );
      window.location.href="edit-device.html";
      //实际中把处理好的数据传到后台处理，如下：
      /*
      field.id = 1;
      field.users = data;
      $.ajax({
          url: '/index/.../...',
          type: 'POST',
          data: field,
          success: function(res) {
              //相关操作
          },
          error: function(res) {
              //异常提示
          }
      });
       */
  };

  /**
   * 获取表格数据
   * @param tableHtml 表格Html
   * @returns {Array}
   */
  function getTableData(tableHtml) {
      let result = [];
      if (tableHtml) {
          let length = tableHtml.length;
          for(let i = 0; i < length; i++) {   //追加数据
              let trData = {}; // 每行的数据

              //注意text()和val()的区别
              let device = $(tableHtml).eq(i).find('.device').text();
              let level = $(tableHtml).eq(i).find('.level').text();

              //如果不存在给默认值（视情况而定）
              device = (device == undefined) ? '' : device;
              level = (level == undefined) ? '' : level;

              //数据赋值
              trData.device = device;
              trData.level = level;

              result.push(trData);    //数据追加
          }
      }
      return result;
  }
</script>
</head>

<body>
  <!-- Navbar -->
  <!-- Cover -->
  <div class="align-items-center d-flex cover section-aquamarine py-5" style="background-image: linear-gradient(to left bottom, rgba(189, 195, 199, .75), rgba(44, 62, 80, .75)); background-size: 100%;">
    <div class="container bg-light">
      <div class="row d-flex bg-light">
        <div class="col-lg-11">
          <h1 class="display-3 text-light">设备列表</h1>
        </div>
        <div class="col-md-1">
          <div class="btn-group">
            <button class="btn btn-primary dropdown-toggle" data-toggle="dropdown"> 选项 </button>
            <div class="dropdown-menu"> <a class="dropdown-item" href="devices.html">返回上一级</a>
              <a class="dropdown-item" onclick="custom_close()">退出</a>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 bg-light">
          <div class="table-responsive">
            <table class="table table-striped table-borderless border_distance">
              <thead>
                <tr>
                  <th scope="col"></th>
                  <th scope="col">设备名称</th>
                  <th scope="col">添加时间</th>
                  <th>隐私等级</th>
                  <th>可访问者</th>
                  <th class="d-flex justify-content-center">编辑/删除</th>
                </tr>
              </thead>
              <tbody>
                <tr class="device1">
                  <th scope="row">1</th>
                  <td class="device">门锁</td>
                  <td>2021-5-21-20:45</td>
                  <td class="level">3</td>
                  <td>root</td>
                  <td class="d-flex justify-content-center">
                    <div class="btn-group"><a href="confirm-information.html" class="btn btn-primary">查看IP</a> <a class="btn btn-outline-primary text-primary" onclick="ViewData()">编辑</a> <a href="#" class="btn btn-primary">删除</a> </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">2</th>
                  <td class="device">智能电视</td>
                  <td>2021-5-23-15:36</td>
                  <td class="level">2</td>
                  <td>root、owner</td>
                  <td class="d-flex justify-content-center">
                    <div class="btn-group"><a href="confirm-information.html" class="btn btn-primary">查看IP</a> <a href="#" class="btn btn-outline-primary" onclick="ViewData()">编辑</a> <a href="#" class="btn btn-primary">删除</a> </div>
                  </td>
                </tr>
                <tr>
                  <th scope="row">3</th>
                  <td class="device">蓝牙音响</td>
                  <td>2021-5-25-18:56</td>
                  <td class="level">1</td>
                  <td>all user</td>
                  <td class="d-flex justify-content-center">
                    <div class="btn-group"><a href="confirm-information.html" class="btn btn-primary">查看IP</a> <a href="#" class="btn btn-outline-primary" onclick="ViewData()">编辑</a> <a href="#" class="btn btn-primary">删除</a> </div>
                  </td>
                </tr>
                <tr>
                  <td>4</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>5</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>6</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>7</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>8</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>9</td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Intro -->
  <!-- Gallery -->
  <!-- Menu -->
  <!-- Carousel reviews -->
  <!-- Carousel venue -->
  <!-- Events -->
  <!-- Parallax section -->
  <!-- Footer -->
  <!-- JavaScript dependencies -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <!-- Script: Smooth scrolling between anchors in the same page -->
  <script src="js/smooth-scroll.js" style=""></script>
</body>

</html>
